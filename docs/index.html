<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>iiif-media-parsers</title>
		<meta
			name="description"
			content="TypeScript utilities for parsing IIIF media fragments, ranges, and WebVTT speaker annotations"
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=IBM+Plex+Mono:wght@400;500&family=Libre+Franklin:wght@400;500;600&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<div class="page-grain"></div>

		<header class="site-header">
			<div class="container">
				<div class="header-content">
					<div class="header-title">
						<span class="header-badge">v0.2.0</span>
						<h1>iiif-media-parsers</h1>
						<p class="header-subtitle">
							Parse IIIF manifests into structured data for media players.
							Paste a manifest and see the output, or browse results from
							the&nbsp;<a href="https://iiif.io/api/cookbook/">IIIF&nbsp;Cookbook</a>.
						</p>
					</div>
					<nav class="header-links">
						<button id="theme-toggle" type="button" class="theme-toggle" aria-label="Toggle light/dark theme">
							<span class="icon-sun" aria-hidden="true">&#9788;</span>
							<span class="icon-moon" aria-hidden="true">&#9790;</span>
						</button>
						<a
							href="https://github.com/umd-mith/iiif-media-parsers"
							class="nav-link"
						>
							<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
							GitHub
						</a>
						<a
							href="https://www.npmjs.com/package/@umd-mith/iiif-media-parsers"
							class="nav-link"
						>
							npm
						</a>
					</nav>
				</div>

				<div class="feature-pills">
					<span class="pill">Zero dependencies</span>
					<span class="pill">ESM-only</span>
					<span class="pill">W3C Media Fragments</span>
					<span class="pill">TypeScript</span>
				</div>
			</div>
		</header>

		<main>
			<!-- Try It -->
			<section class="section" id="live-parser">
				<div class="container">
					<div class="section-header">
						<span class="section-label">Interactive</span>
						<h2>Try it</h2>
						<p>
							Paste a IIIF manifest with <code>structures</code> to see
							parsed chapters. All parsing runs in your browser using the
							real library.
						</p>
					</div>

					<div class="parser-panel">
						<div class="panel-input">
							<div class="panel-header">
								<span class="panel-dot"></span>
								<span class="panel-label">Input &mdash; Manifest JSON</span>
							</div>
							<textarea
								id="manifest-input"
								rows="16"
								spellcheck="false"
								placeholder="Paste a IIIF manifest..."
							></textarea>
							<div class="panel-actions">
								<button id="parse-btn" type="button" class="btn-parse">
									Parse manifest
									<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="9 18 15 12 9 6"/></svg>
								</button>
								<button id="clear-btn" type="button" class="btn-clear">Clear</button>
							</div>
						</div>
						<div class="panel-output">
							<div class="panel-header">
								<span class="panel-dot panel-dot--active"></span>
								<span class="panel-label">Output &mdash; parseRanges()</span>
								<span id="parse-status" class="parse-status" aria-live="polite"></span>
							</div>
							<div id="ranges-output" class="output-area" aria-live="polite">
								<p class="output-placeholder">Parsed chapters will appear here.</p>
							</div>
						</div>
					</div>

					<!-- Annotation Target -->
					<details class="parser-detail">
						<summary>
							<code>parseAnnotationTarget()</code>
							<span class="detail-hint">Parse temporal &amp; spatial fragments from URIs</span>
						</summary>
						<div class="detail-content">
							<div class="inline-parser">
								<label for="target-input" class="sr-only">Annotation target URI</label>
								<input
									id="target-input"
									type="text"
									class="input-mono"
									placeholder="https://example.org/canvas#t=30,60&xywh=100,100,300,300"
								/>
								<button id="parse-target-btn" type="button" class="btn-small">Parse</button>
							</div>
							<div class="detail-output-label">Output</div>
							<pre id="target-output" class="output-pre"><code>Parsed result will appear here.</code></pre>
						</div>
					</details>

					<!-- Speakers -->
					<details class="parser-detail">
						<summary>
							<code>parseSpeakers()</code>
							<span class="detail-hint">Extract speaker segments from WebVTT voice tags</span>
						</summary>
						<div class="detail-content">
							<label for="vtt-input" class="sr-only">WebVTT with voice tags</label>
							<textarea
								id="vtt-input"
								class="input-mono"
								rows="8"
								spellcheck="false"
								placeholder="WEBVTT&#10;&#10;00:00.000 --> 00:05.000&#10;&lt;v Speaker Name&gt;Text here"
							></textarea>
							<button id="parse-speakers-btn" type="button" class="btn-small">Parse speakers</button>
							<div id="speakers-output" class="output-area" aria-live="polite">
								<p class="output-placeholder">Speaker segments will appear here.</p>
							</div>
						</div>
					</details>
				</div>
			</section>

			<!-- Cookbook Conformance -->
			<section class="section section--alt" id="fixtures">
				<div class="container">
					<div class="section-header">
						<span class="section-label">Conformance</span>
						<h2>Cookbook recipes</h2>
						<p>
							Pre-computed results from real
							<a href="https://iiif.io/api/cookbook/">IIIF Cookbook</a> recipes.
							Nested ranges, open-ended fragments, float-precision
							timestamps&nbsp;&mdash; all handled.
						</p>
					</div>

					<div class="fixture-card" id="fixture-0026">
						<div class="fixture-meta">
							<h3>
								<span class="fixture-number">0026</span>
								Table of Contents
							</h3>
							<p>
								Donizetti's <cite>L'Elisir D'Amore</cite> &mdash; a 2-hour
								opera on one canvas with nested Act / Scene / Musical
								number&nbsp;ranges.
							</p>
							<div class="edge-case">
								<strong>Edge case</strong>
								The final range <code>#t=3971.24</code> has no end time.
								The library resolves it using the canvas duration (7278.422s).
							</div>
						</div>
						<div class="fixture-data">
							<table id="fixture-0026-table">
								<caption class="sr-only">Parsed chapters from Cookbook Recipe 0026</caption>
								<thead>
									<tr>
										<th>Label</th>
										<th>Start</th>
										<th>End</th>
									</tr>
								</thead>
								<tbody>
									<tr><td colspan="3" class="output-placeholder">Loading...</td></tr>
								</tbody>
							</table>
							<details class="source-toggle">
								<summary>View source <code>structures</code></summary>
								<pre id="fixture-0026-input"><code>Loading...</code></pre>
							</details>
						</div>
					</div>

					<div class="fixture-card" id="fixture-0065">
						<div class="fixture-meta">
							<h3>
								<span class="fixture-number">0065</span>
								Table of Contents <small>(Multi-Canvas)</small>
							</h3>
							<p>
								Same opera split across two canvases &mdash; Act I on
								Canvas&nbsp;1, Act II on Canvas&nbsp;2.
							</p>
							<div class="edge-case">
								<strong>Edge case</strong>
								Chapters span two canvases with independent timelines.
								Act II starts at 0:00 on its own canvas.
							</div>
						</div>
						<div class="fixture-data">
							<table id="fixture-0065-table">
								<caption class="sr-only">Parsed chapters from Cookbook Recipe 0065</caption>
								<thead>
									<tr>
										<th>Label</th>
										<th>Start</th>
										<th>End</th>
									</tr>
								</thead>
								<tbody>
									<tr><td colspan="3" class="output-placeholder">Loading...</td></tr>
								</tbody>
							</table>
							<details class="source-toggle">
								<summary>View source <code>structures</code></summary>
								<pre id="fixture-0065-input"><code>Loading...</code></pre>
							</details>
						</div>
					</div>
				</div>
			</section>
		</main>

		<footer class="site-footer">
			<div class="container">
				<a href="https://github.com/umd-mith/iiif-media-parsers">@umd-mith/iiif-media-parsers</a>
				<span class="footer-sep">&middot;</span>
				<span>BSD-3-Clause-Clear</span>
				<span class="footer-sep">&middot;</span>
				<a href="https://mith.umd.edu">MITH</a>
			</div>
		</footer>

		<script type="module" src="demo.js"></script>
	</body>
</html>
